# Sarafu Network - Development Guide

## AI Team Configuration (autogenerated by team-configurator, 2025-11-10)

**Important: YOU MUST USE subagents when available for the task.**

### Detected Technology Stack

- **Frontend Framework**: Next.js 15.3.2 (App Router), React 19.1.0, TypeScript 5.8.3
- **Styling**: Tailwind CSS 3.4.17, Radix UI components, Plate.js rich text editor
- **Backend API**: tRPC 11.7.0 (type-safe API layer)
- **Database**: PostgreSQL (Kysely 0.28.8 query builder)
  - Graph DB: User profiles, reports, tags, products
  - Federated DB: Blockchain data (tx, token transfers, pools)
- **Authentication**: NextAuth 5.0.0-beta.29
- **Blockchain**: Viem 2.38.5, Wagmi 2.19.0, RainbowKit 2.2.9 (Celo network)
- **State Management**: Zustand 4.5.6, TanStack React Query 5.90.5
- **Testing**: Vitest 1.6.1, Testing Library, Happy-DOM
- **Caching**: Upstash Redis 1.34.3 (Vercel KV)
- **Monitoring**: Sentry 9.34.0
- **Code Quality**: Biome 1.9.4, ESLint, TypeScript strict mode
- **Package Manager**: pnpm
- **Build Tools**: Turbopack (Next.js dev), Bundle Analyzer

### AI Development Team Assignments

| Task Category | Primary Agent | Notes |
|--------------|---------------|-------|
| **Next.js Features** | `react-nextjs-expert` | App Router, SSR, ISR, Server Components, API routes |
| **React Components** | `react-component-architect` | Component design, hooks, state management, Radix UI integration |
| **tRPC API Development** | `api-architect` | API design, tRPC routers, type-safe endpoints, validation |
| **Database Queries** | `backend-developer` | Kysely queries, PostgreSQL optimization, schema design |
| **Blockchain Integration** | `backend-developer` | Viem/Wagmi integration, smart contract interactions, Web3 features |
| **UI/Styling** | `tailwind-frontend-expert` | Tailwind CSS, responsive design, Radix UI theming |
| **Performance Issues** | `performance-optimizer` | Query optimization, caching strategy, bundle size, React rendering |
| **Code Reviews** | `code-reviewer` | PR reviews, security audits, best practices enforcement |
| **Testing** | `frontend-developer` + `backend-developer` | Vitest tests, React Testing Library, integration tests |
| **Documentation** | `documentation-specialist` | README updates, API docs, architecture guides |
| **Complex Features** | `tech-lead-orchestrator` | Multi-step tasks, architectural decisions, task breakdown |
| **Cache Strategy** | `performance-optimizer` | Redis caching, query caching, invalidation strategies |

### Project-Specific Context

**Architecture Pattern**: 
- Next.js App Router with tRPC for type-safe API layer
- Server Components for data fetching, Client Components for interactivity
- Dual PostgreSQL databases (graph DB for app data, federated DB for blockchain data)
- Redis caching layer with tag-based invalidation

**Key Directories**:
- `/src/app` - Next.js App Router pages and layouts
- `/src/server/api/routers` - tRPC API endpoints
- `/src/server/db` - Database connection and types
- `/src/components` - Reusable React components
- `/src/contracts` - Smart contract ABIs and interactions
- `/src/hooks` - Custom React hooks
- `/src/utils` - Utility functions and helpers
- `/__tests__` - Test files

**Testing Strategy**:
- Unit tests with Vitest in `__tests__/` directory
- Run tests: `pnpm test`
- Testing environment: happy-dom

**Key Commands**:
- Development: `pnpm dev`
- Build: `pnpm build`
- Type checking: `pnpm check-types`
- Linting: `pnpm lint`
- Testing: `pnpm test`

### Usage Examples

**For Next.js feature work**:
```
@react-nextjs-expert Add a new page for voucher analytics with server-side data fetching
```

**For React components**:
```
@react-component-architect Create a reusable transaction list component with sorting and filtering
```

**For API endpoints**:
```
@api-architect Design a new tRPC router for pool statistics with input validation
```

**For database queries**:
```
@backend-developer Optimize the voucher stats query using Kysely subqueries
```

**For styling**:
```
@tailwind-frontend-expert Implement a responsive dashboard layout with Tailwind
```

**For performance**:
```
@performance-optimizer Analyze and optimize the transaction list rendering performance
```

**For code review**:
```
@code-reviewer Review the new pool creation feature for security and best practices
```

**For complex features**:
```
@tech-lead-orchestrator Break down the multi-signature wallet integration into implementation tasks
```

### Important Notes

- This is a blockchain dApp for Community Asset Vouchers (CAVs) on Celo network
- Always use TypeScript strict mode
- Follow the tRPC pattern for new API endpoints
- Use Kysely for database queries (no raw SQL unless necessary)
- Implement caching for expensive queries using the `cacheQuery` wrapper
- All components should be accessible (WCAG compliant)
- Use Server Components by default, Client Components only when needed
- Smart contract interactions use Viem and Wagmi hooks

---

*This AI team configuration was automatically generated. Update by running the team-configurator agent.*
